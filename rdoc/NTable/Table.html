<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class NTable::Table - NTable 0.1.3 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/ntable/construction.rb
    <li>lib/ntable/table.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-from_json_object">::from_json_object</a>
    
    <li><a href="#method-c-from_nested_object">::from_nested_object</a>
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-c-parse_json">::parse_json</a>
    
    <li><a href="#method-i-3D-3D">#==</a>
    
    <li><a href="#method-i-5B-5D">#[]</a>
    
    <li><a href="#method-i-5B-5D-3D">#[]=</a>
    
    <li><a href="#method-i-_offset_for_args">#_offset_for_args</a>
    
    <li><a href="#method-i-all_axes">#all_axes</a>
    
    <li><a href="#method-i-axis">#axis</a>
    
    <li><a href="#method-i-decompose">#decompose</a>
    
    <li><a href="#method-i-decompose_reduce">#decompose_reduce</a>
    
    <li><a href="#method-i-decompose_reduce_with_position">#decompose_reduce_with_position</a>
    
    <li><a href="#method-i-degenerate-3F">#degenerate?</a>
    
    <li><a href="#method-i-dim">#dim</a>
    
    <li><a href="#method-i-each">#each</a>
    
    <li><a href="#method-i-each_with_position">#each_with_position</a>
    
    <li><a href="#method-i-empty-3F">#empty?</a>
    
    <li><a href="#method-i-eql-3F">#eql?</a>
    
    <li><a href="#method-i-fill-21">#fill!</a>
    
    <li><a href="#method-i-get">#get</a>
    
    <li><a href="#method-i-include-3F">#include?</a>
    
    <li><a href="#method-i-inject">#inject</a>
    
    <li><a href="#method-i-inject_with_position">#inject_with_position</a>
    
    <li><a href="#method-i-load-21">#load!</a>
    
    <li><a href="#method-i-map">#map</a>
    
    <li><a href="#method-i-map-21">#map!</a>
    
    <li><a href="#method-i-map_with_position">#map_with_position</a>
    
    <li><a href="#method-i-map_with_position-21">#map_with_position!</a>
    
    <li><a href="#method-i-parent">#parent</a>
    
    <li><a href="#method-i-reduce">#reduce</a>
    
    <li><a href="#method-i-reduce_with_position">#reduce_with_position</a>
    
    <li><a href="#method-i-set-21">#set!</a>
    
    <li><a href="#method-i-shared_slice">#shared_slice</a>
    
    <li><a href="#method-i-size">#size</a>
    
    <li><a href="#method-i-slice">#slice</a>
    
    <li><a href="#method-i-to_json">#to_json</a>
    
    <li><a href="#method-i-to_json_object">#to_json_object</a>
    
    <li><a href="#method-i-to_nested_object">#to_nested_object</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../History_rdoc.html">History</a>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../NTable.html">NTable</a>
  
    <li><a href="../NTable/EmptyAxis.html">NTable::EmptyAxis</a>
  
    <li><a href="../NTable/IndexWrapper.html">NTable::IndexWrapper</a>
  
    <li><a href="../NTable/IndexedAxis.html">NTable::IndexedAxis</a>
  
    <li><a href="../NTable/LabeledAxis.html">NTable::LabeledAxis</a>
  
    <li><a href="../NTable/NTableError.html">NTable::NTableError</a>
  
    <li><a href="../NTable/NoSuchCellError.html">NTable::NoSuchCellError</a>
  
    <li><a href="../NTable/ObjectAxis.html">NTable::ObjectAxis</a>
  
    <li><a href="../NTable/Structure.html">NTable::Structure</a>
  
    <li><a href="../NTable/Structure/AxisInfo.html">NTable::Structure::AxisInfo</a>
  
    <li><a href="../NTable/Structure/Position.html">NTable::Structure::Position</a>
  
    <li><a href="../NTable/StructureMismatchError.html">NTable::StructureMismatchError</a>
  
    <li><a href="../NTable/StructureStateError.html">NTable::StructureStateError</a>
  
    <li><a href="../NTable/Table.html">NTable::Table</a>
  
    <li><a href="../NTable/TableLockedError.html">NTable::TableLockedError</a>
  
    <li><a href="../NTable/UnknownAxisError.html">NTable::UnknownAxisError</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class NTable::Table</h1>

  <div id="description" class="description">
    
<p>An N-dimensional table object, comprising structure and values.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-structure" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">structure</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The <a href="Structure.html">Structure</a> of this table</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-from_json_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_json_object</span><span
            class="method-args">(json_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Deprecated synonym for <a
href="../NTable.html#method-c-from_json_object">NTable.from_json_object</a></p>
          

          
          <div class="method-source-code" id="from_json_object-source">
            <pre><span class="ruby-comment"># File lib/ntable/construction.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_json_object</span>(<span class="ruby-identifier">json_</span>)
  <span class="ruby-operator">::</span><span class="ruby-constant">NTable</span>.<span class="ruby-identifier">from_json_object</span>(<span class="ruby-identifier">json_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- from_json_object-source -->
          
        </div>

        

        
      </div><!-- from_json_object-method -->

    
      <div id="method-c-from_nested_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_nested_object</span><span
            class="method-args">(obj_, field_opts_=[], opts_={})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Deprecated synonym for <a
href="../NTable.html#method-c-from_nested_object">NTable.from_nested_object</a></p>
          

          
          <div class="method-source-code" id="from_nested_object-source">
            <pre><span class="ruby-comment"># File lib/ntable/construction.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_nested_object</span>(<span class="ruby-identifier">obj_</span>, <span class="ruby-identifier">field_opts_</span>=[], <span class="ruby-identifier">opts_</span>={})
  <span class="ruby-operator">::</span><span class="ruby-constant">NTable</span>.<span class="ruby-identifier">from_nested_object</span>(<span class="ruby-identifier">obj_</span>, <span class="ruby-identifier">field_opts_</span>, <span class="ruby-identifier">opts_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- from_nested_object-source -->
          
        </div>

        

        
      </div><!-- from_nested_object-method -->

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(structure_, data_={})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>This is a low-level table creation mechanism. Generally, you should use <a
href="../NTable.html#method-c-create">NTable.create</a> instead.</p>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">structure_</span>, <span class="ruby-identifier">data_</span>={})
  <span class="ruby-ivar">@structure</span> = <span class="ruby-identifier">structure_</span>
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">lock!</span>
  <span class="ruby-identifier">size_</span> = <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">load_</span> = <span class="ruby-identifier">data_</span>[<span class="ruby-value">:load</span>])
    <span class="ruby-identifier">load_size_</span> = <span class="ruby-identifier">load_</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">load_size_</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">size_</span>
      <span class="ruby-ivar">@vals</span> = <span class="ruby-identifier">load_</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">size_</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">load_size_</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">size_</span>
      <span class="ruby-ivar">@vals</span> = <span class="ruby-identifier">load_</span> <span class="ruby-operator">+</span> <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">size_</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">load_size_</span>, <span class="ruby-identifier">data_</span>[<span class="ruby-value">:fill</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@vals</span> = <span class="ruby-identifier">load_</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> (<span class="ruby-identifier">acquire_</span> = <span class="ruby-identifier">data_</span>[<span class="ruby-value">:acquire</span>])
    <span class="ruby-ivar">@vals</span> = <span class="ruby-identifier">acquire_</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@vals</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">size_</span>, <span class="ruby-identifier">data_</span>[<span class="ruby-value">:fill</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@offset</span> = <span class="ruby-identifier">data_</span>[<span class="ruby-value">:offset</span>].<span class="ruby-identifier">to_i</span>
  <span class="ruby-ivar">@parent</span> = <span class="ruby-identifier">data_</span>[<span class="ruby-value">:parent</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
      <div id="method-c-parse_json" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_json</span><span
            class="method-args">(json_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Deprecated synonym for <a
href="../NTable.html#method-c-parse_json">NTable.parse_json</a></p>
          

          
          <div class="method-source-code" id="parse_json-source">
            <pre><span class="ruby-comment"># File lib/ntable/construction.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_json</span>(<span class="ruby-identifier">json_</span>)
  <span class="ruby-operator">::</span><span class="ruby-constant">NTable</span>.<span class="ruby-identifier">parse_json</span>(<span class="ruby-identifier">json_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_json-source -->
          
        </div>

        

        
      </div><!-- parse_json-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(rhs_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the two tables are equivalent in data but not necessarily
parentage. The structure of a shared slice may be equivalent, in this
sense, to the “same” table created from scratch with no parent.</p>
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">rhs_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-identifier">rhs_</span>)
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Table</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">parent</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parent</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@structure</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">structure</span>
        <span class="ruby-identifier">riter_</span> = <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">each</span>
        <span class="ruby-identifier">liter_</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">each</span>
        <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
          <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">liter_</span>.<span class="ruby-identifier">next</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">riter_</span>.<span class="ruby-identifier">next</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">structure</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-ivar">@structure</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value">:@vals</span>).<span class="ruby-identifier">eql?</span>(<span class="ruby-ivar">@vals</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- 3D-3D-source -->
          
        </div>

        

        
      </div><!-- 3D-3D-method -->

    
      <div id="method-i-5B-5D" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">[]</span><span
            class="method-args">(*args_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-get">get</a>
        </div>
        
      </div><!-- 5B-5D-method -->

    
      <div id="method-i-5B-5D-3D" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">[]=</span><span
            class="method-args">(*args_, &block_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-set-21">set!</a>
        </div>
        
      </div><!-- 5B-5D-3D-method -->

    
      <div id="method-i-_offset_for_args" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_offset_for_args</span><span
            class="method-args">(args_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="_offset_for_args-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 646</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_offset_for_args</span>(<span class="ruby-identifier">args_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">first_</span> = <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">args_</span> = <span class="ruby-identifier">first_</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">first_</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Hash</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">first_</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Array</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_offset</span>(<span class="ruby-identifier">args_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- _offset_for_args-source -->
          
        </div>

        

        
      </div><!-- _offset_for_args-method -->

    
      <div id="method-i-all_axes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">all_axes</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of AxisInfo objects representing all the axes of the
structure of this table.</p>
          

          
          <div class="method-source-code" id="all_axes-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">all_axes</span>
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">all_axes</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- all_axes-source -->
          
        </div>

        

        
      </div><!-- all_axes-method -->

    
      <div id="method-i-axis" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">axis</span><span
            class="method-args">(axis_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns the AxisInfo object representing the given axis. The axis must be
specified by 0-based index or by name string. Returns nil if there is no
such axis.</p>
          

          
          <div class="method-source-code" id="axis-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 168</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">axis</span>(<span class="ruby-identifier">axis_</span>)
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">axis</span>(<span class="ruby-identifier">axis_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- axis-source -->
          
        </div>

        

        
      </div><!-- axis-method -->

    
      <div id="method-i-decompose" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decompose</span><span
            class="method-args">(*axes_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Decomposes this table, breaking it into a set of lower-dimensional tables,
all arranged in a table. For example, you could decompose a two-dimensional
table into a one-dimensional table of one-dimensional tables. You must
provide an array of axis specifications (indexes or names) identifying
which axes should be part of the lower-dimensional tables.</p>
          

          
          <div class="method-source-code" id="decompose-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 506</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decompose</span>(*<span class="ruby-identifier">axes_</span>)
  <span class="ruby-identifier">axes_</span> = <span class="ruby-identifier">axes_</span>.<span class="ruby-identifier">flatten</span>
  <span class="ruby-identifier">axis_indexes_</span> = []
  <span class="ruby-identifier">axes_</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a_</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">ainfo_</span> = <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">axis</span>(<span class="ruby-identifier">a_</span>))
      <span class="ruby-identifier">axis_indexes_</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ainfo_</span>.<span class="ruby-identifier">axis_index</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">UnknownAxisError</span>, <span class="ruby-node">&quot;Unknown axis: #{a_.inspect}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">inner_struct_</span> = <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">substructure_including</span>(<span class="ruby-identifier">axis_indexes_</span>)
  <span class="ruby-identifier">outer_struct_</span> = <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">substructure_omitting</span>(<span class="ruby-identifier">axis_indexes_</span>)
  <span class="ruby-identifier">vec_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">outer_struct_</span>.<span class="ruby-identifier">dim</span>, <span class="ruby-value">0</span>)
  <span class="ruby-identifier">tables_</span> = (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">outer_struct_</span>.<span class="ruby-identifier">size</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i_</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">t_</span> = <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">inner_struct_</span>, <span class="ruby-value">:acquire</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@vals</span>,
      <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">outer_struct_</span>.<span class="ruby-identifier">_compute_offset_for_vector</span>(<span class="ruby-identifier">vec_</span>),
      <span class="ruby-value">:parent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">outer_struct_</span>.<span class="ruby-identifier">_inc_vector</span>(<span class="ruby-identifier">vec_</span>)
    <span class="ruby-identifier">t_</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">outer_struct_</span>.<span class="ruby-identifier">unlocked_copy</span>, <span class="ruby-value">:acquire</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tables_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- decompose-source -->
          
        </div>

        

        
      </div><!-- decompose-method -->

    
      <div id="method-i-decompose_reduce" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decompose_reduce</span><span
            class="method-args">(decompose_axes_, *reduce_args_, &block_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Decompose this table using the given axes, and then reduce each inner
table, returning a table of the reduction values.</p>
          

          
          <div class="method-source-code" id="decompose_reduce-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 533</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decompose_reduce</span>(<span class="ruby-identifier">decompose_axes_</span>, *<span class="ruby-identifier">reduce_args_</span>, &amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-identifier">decompose</span>(<span class="ruby-identifier">decompose_axes_</span>).<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">sub_</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sub_</span>.<span class="ruby-identifier">reduce</span>(*<span class="ruby-identifier">reduce_args_</span>, &amp;<span class="ruby-identifier">block_</span>) }
<span class="ruby-keyword">end</span></pre>
          </div><!-- decompose_reduce-source -->
          
        </div>

        

        
      </div><!-- decompose_reduce-method -->

    
      <div id="method-i-decompose_reduce_with_position" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decompose_reduce_with_position</span><span
            class="method-args">(decompose_axes_, *reduce_args_, &block_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Decompose this table using the given axes, and then reduce each inner table
with position, returning a table of the reduction values.</p>
          

          
          <div class="method-source-code" id="decompose_reduce_with_position-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 541</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decompose_reduce_with_position</span>(<span class="ruby-identifier">decompose_axes_</span>, *<span class="ruby-identifier">reduce_args_</span>, &amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-identifier">decompose</span>(<span class="ruby-identifier">decompose_axes_</span>).<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">sub_</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sub_</span>.<span class="ruby-identifier">reduce_with_position</span>(*<span class="ruby-identifier">reduce_args_</span>, &amp;<span class="ruby-identifier">block_</span>) }
<span class="ruby-keyword">end</span></pre>
          </div><!-- decompose_reduce_with_position-source -->
          
        </div>

        

        
      </div><!-- decompose_reduce_with_position-method -->

    
      <div id="method-i-degenerate-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">degenerate?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>True if this is a degenerate (scalar) table with a single cell and no
dimensions.</p>
          

          
          <div class="method-source-code" id="degenerate-3F-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 159</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">degenerate?</span>
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">degenerate?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- degenerate-3F-source -->
          
        </div>

        

        
      </div><!-- degenerate-3F-method -->

    
      <div id="method-i-dim" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dim</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>The number of dimensions/axes in this table.</p>
          

          
          <div class="method-source-code" id="dim-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dim</span>
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">dim</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- dim-source -->
          
        </div>

        

        
      </div><!-- dim-method -->

    
      <div id="method-i-each" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each</span><span
            class="method-args">() { |vals| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Iterate over all table cells, in order, and call the given block. If no
block is given, an ::Enumerator is returned.</p>
          

          
          <div class="method-source-code" id="each-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>(&amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-identifier">vec_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">dim</span>, <span class="ruby-value">0</span>)
      <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
        <span class="ruby-keyword">yield</span>(<span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_compute_offset_for_vector</span>(<span class="ruby-identifier">vec_</span>)])
        <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_inc_vector</span>(<span class="ruby-identifier">vec_</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">enum_for</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@vals</span>.<span class="ruby-identifier">each</span>(&amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- each-source -->
          
        </div>

        

        
      </div><!-- each-method -->

    
      <div id="method-i-each_with_position" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_with_position</span><span
            class="method-args">() { |vals, position| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Iterate over all table cells, and call the given block with the value and
the <a href="Structure/Position.html">Structure::Position</a> for the cell.</p>
          

          
          <div class="method-source-code" id="each_with_position-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 329</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_with_position</span>
  <span class="ruby-identifier">vec_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">dim</span>, <span class="ruby-value">0</span>)
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">yield</span>(<span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_compute_offset_for_vector</span>(<span class="ruby-identifier">vec_</span>)],
      <span class="ruby-constant">Structure</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>, <span class="ruby-identifier">vec_</span>))
    <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_inc_vector</span>(<span class="ruby-identifier">vec_</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- each_with_position-source -->
          
        </div>

        

        
      </div><!-- each_with_position-method -->

    
      <div id="method-i-empty-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">empty?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>True if this table has no cells.</p>
          

          
          <div class="method-source-code" id="empty-3F-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 151</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- empty-3F-source -->
          
        </div>

        

        
      </div><!-- empty-3F-method -->

    
      <div id="method-i-eql-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eql?</span><span
            class="method-args">(rhs_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the two tables are equivalent, both in the data and in the
parentage. The structure of a shared slice is not equivalent, in this
sense, to the “same” table created from scratch, because the former is a
“sparse” subset of a parent whereas the latter is not.</p>
          

          
          <div class="method-source-code" id="eql-3F-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">rhs_</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-identifier">rhs_</span>) <span class="ruby-operator">||</span>
    <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Table</span>) <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">structure</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@parent</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">parent</span>) <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value">:@offset</span>) <span class="ruby-operator">==</span> <span class="ruby-ivar">@offset</span> <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-identifier">rhs_</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value">:@vals</span>).<span class="ruby-identifier">eql?</span>(<span class="ruby-ivar">@vals</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- eql-3F-source -->
          
        </div>

        

        
      </div><!-- eql-3F-method -->

    
      <div id="method-i-fill-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fill!</span><span
            class="method-args">(value_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Fill all table cells with the given value.</p>

<p>You cannot load values into a table with a parent. Instead, you must modify
the parent, and those changes will be reflected in the child.</p>

<p>Returns self so calls can be chained.</p>
          

          
          <div class="method-source-code" id="fill-21-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 299</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fill!</span>(<span class="ruby-identifier">value_</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TableLockedError</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
  <span class="ruby-ivar">@vals</span>.<span class="ruby-identifier">fill</span>(<span class="ruby-identifier">value_</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- fill-21-source -->
          
        </div>

        

        
      </div><!-- fill-21-method -->

    
      <div id="method-i-get" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get</span><span
            class="method-args">(*args_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns the value in the cell at the given coordinates, which may be given
as labels or as 0-based row indexes. You may specify the cell as an array
of coordinates, or as a hash mapping axis name or axis index to coordinate.</p>

<p>For example, for a typical database result set with an axis called “row” of
numerically identified rows, and an axis called “col” with string-named
columns, these call sequences are equivalent:</p>

<pre class="ruby"><span class="ruby-identifier">get</span>(<span class="ruby-value">3</span>, <span class="ruby-string">'name'</span>)
<span class="ruby-identifier">get</span>([<span class="ruby-value">3</span>, <span class="ruby-string">'name'</span>])
<span class="ruby-identifier">get</span>(:<span class="ruby-identifier">row</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, :<span class="ruby-identifier">col</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'name'</span>)
<span class="ruby-identifier">get</span>(<span class="ruby-value">0</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-value">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'name'</span>)
</pre>

<p>Alternately, you can provide row numbers (0-based) instead. If, for
example, “name” is the second column (corresponding to index 1), then the
following queries are also equivalent:</p>

<pre class="ruby"><span class="ruby-identifier">get</span>(<span class="ruby-value">3</span>, <span class="ruby-value">1</span>)
<span class="ruby-identifier">get</span>(:<span class="ruby-identifier">row</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, :<span class="ruby-identifier">col</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
</pre>

<p>For axes whose labels are integers (for example, a numerically identified
axis such as <a href="IndexedAxis.html">IndexedAxis</a>), it is ambiguous
whether a value is intended as a label or an index. In this case, <a
href="../NTable.html">NTable</a> defalts to assuming the value is a label.
If you want to force a value to be treated as a 0-based row index, wrap it
in a call to <a href="../NTable.html#method-c-index">NTable.index</a>, as
follows:</p>

<pre>get(NTable.index(3), 1)</pre>

<p>Raises <a href="NoSuchCellError.html">NoSuchCellError</a> if the
coordinates do not exist.</p>
          

          
          <div class="method-source-code" id="get-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get</span>(*<span class="ruby-identifier">args_</span>)
  <span class="ruby-identifier">offset_</span> = <span class="ruby-identifier">_offset_for_args</span>(<span class="ruby-identifier">args_</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">offset_</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoSuchCellError</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">offset_</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- get-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-5B-5D">[]</a>
        </div>
        

        
      </div><!-- get-method -->

    
      <div id="method-i-include-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">include?</span><span
            class="method-args">(*args_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns a boolean indicating whether the given cell coordinates actually
exist. The arguments use the same syntax as for <a
href="Table.html#method-i-get">#get</a>.</p>
          

          
          <div class="method-source-code" id="include-3F-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 236</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">include?</span>(*<span class="ruby-identifier">args_</span>)
  <span class="ruby-identifier">_offset_for_args</span>(<span class="ruby-identifier">args_</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- include-3F-source -->
          
        </div>

        

        
      </div><!-- include-3F-method -->

    
      <div id="method-i-inject" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">inject</span><span
            class="method-args">(*args_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-reduce">reduce</a>
        </div>
        
      </div><!-- inject-method -->

    
      <div id="method-i-inject_with_position" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">inject_with_position</span><span
            class="method-args">(*args_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-reduce_with_position">reduce_with_position</a>
        </div>
        
      </div><!-- inject_with_position-method -->

    
      <div id="method-i-load-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load!</span><span
            class="method-args">(vals_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Load an array of values into the table cells, in order.</p>

<p>You cannot load values into a table with a parent. Instead, you must modify
the parent, and those changes will be reflected in the child.</p>

<p>Returns self so calls can be chained.</p>
          

          
          <div class="method-source-code" id="load-21-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load!</span>(<span class="ruby-identifier">vals_</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TableLockedError</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
  <span class="ruby-identifier">is_</span> = <span class="ruby-identifier">vals_</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-identifier">vs_</span> = <span class="ruby-ivar">@vals</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">is_</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">vs_</span>
    <span class="ruby-ivar">@vals</span> = <span class="ruby-identifier">vals_</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@vals</span>[<span class="ruby-identifier">is_</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">is_</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">vs_</span>
    <span class="ruby-ivar">@vals</span> = <span class="ruby-identifier">vals_</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">vs_</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@vals</span> = <span class="ruby-identifier">vals_</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- load-21-source -->
          
        </div>

        

        
      </div><!-- load-21-method -->

    
      <div id="method-i-map" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">map</span><span
            class="method-args">() { |vals| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return a new table whose structure is the same as this table, and whose
values are given by mapping the current table’s values through the given
block.</p>
          

          
          <div class="method-source-code" id="map-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">map</span>(&amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
    <span class="ruby-identifier">vec_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">dim</span>, <span class="ruby-value">0</span>)
    <span class="ruby-identifier">nvals_</span> = (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">size</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i_</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">val_</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_compute_offset_for_vector</span>(<span class="ruby-identifier">vec_</span>)])
      <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_inc_vector</span>(<span class="ruby-identifier">vec_</span>)
      <span class="ruby-identifier">val_</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">unlocked_copy</span>, <span class="ruby-value">:acquire</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">nvals_</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>, <span class="ruby-value">:acquire</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@vals</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-identifier">block_</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- map-source -->
          
        </div>

        

        
      </div><!-- map-method -->

    
      <div id="method-i-map-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">map!</span><span
            class="method-args">(&block_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Modify the current table in place, mapping values through the given block.</p>

<p>You cannot set values in a table with a parent. Instead, you must modify
the parent, and those changes will be reflected in the child.</p>
          

          
          <div class="method-source-code" id="map-21-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 381</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">map!</span>(&amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TableLockedError</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
  <span class="ruby-ivar">@vals</span>.<span class="ruby-identifier">map!</span>(&amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- map-21-source -->
          
        </div>

        

        
      </div><!-- map-21-method -->

    
      <div id="method-i-map_with_position" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">map_with_position</span><span
            class="method-args">() { |vals, position| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Same as <a href="Table.html#method-i-map">#map</a> except the block is
passed the current table’s value for each cell, and the cell’s <a
href="Structure/Position.html">Structure::Position</a>.</p>
          

          
          <div class="method-source-code" id="map_with_position-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 362</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">map_with_position</span>
  <span class="ruby-identifier">nstructure_</span> = <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">parent</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">unlocked_copy</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@structure</span>
  <span class="ruby-identifier">vec_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">dim</span>, <span class="ruby-value">0</span>)
  <span class="ruby-identifier">nvals_</span> = (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">size</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i_</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">nval_</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_compute_offset_for_vector</span>(<span class="ruby-identifier">vec_</span>)],
      <span class="ruby-constant">Structure</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>, <span class="ruby-identifier">vec_</span>))
    <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_inc_vector</span>(<span class="ruby-identifier">vec_</span>)
    <span class="ruby-identifier">nval_</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">nstructure_</span>, <span class="ruby-value">:acquire</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">nvals_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- map_with_position-source -->
          
        </div>

        

        
      </div><!-- map_with_position-method -->

    
      <div id="method-i-map_with_position-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">map_with_position!</span><span
            class="method-args">() { |val_, position| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Modify the current table in place, mapping values through the given block,
which takes both the old value and the <a
href="Structure/Position.html">Structure::Position</a>.</p>

<p>You cannot set values in a table with a parent. Instead, you must modify
the parent, and those changes will be reflected in the child.</p>
          

          
          <div class="method-source-code" id="map_with_position-21-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 394</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">map_with_position!</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TableLockedError</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
  <span class="ruby-identifier">vec_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">dim</span>, <span class="ruby-value">0</span>)
  <span class="ruby-ivar">@vals</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">val_</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">nval_</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">val_</span>, <span class="ruby-constant">Structure</span><span class="ruby-operator">::</span><span class="ruby-constant">Position</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>, <span class="ruby-identifier">vec_</span>))
    <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">_inc_vector</span>(<span class="ruby-identifier">vec_</span>)
    <span class="ruby-identifier">nval_</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- map_with_position-21-source -->
          
        </div>

        

        
      </div><!-- map_with_position-21-method -->

    
      <div id="method-i-parent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return the parent of this table. A table with a parent shares the parent’s
data, and cannot have its data modified directly. Instead, if the parent
table is modified, the changes are reflected in the child. Returns nil if
this table has no parent.</p>
          

          
          <div class="method-source-code" id="parent-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent</span>
  <span class="ruby-ivar">@parent</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parent-source -->
          
        </div>

        

        
      </div><!-- parent-method -->

    
      <div id="method-i-reduce" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reduce</span><span
            class="method-args">(*args_) { |obj_, e_| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Performs a reduce on the entire table and returns the result. You may use
one of the following call sequences:</p>
<dl class="rdoc-list label-list"><dt>reduce{ |accumulator, value| <em>block</em> }
<dd>
<p>Reduces using the given block as the reduction function. The first element
in the table is used as the initial accumulator.</p>
</dd><dt>reduce(initial){ |accumulator, value| <em>block</em> }
<dd>
<p>Reduces using the given block as the reduction function, with the given
initial value for the accumulator.</p>
</dd></dl>

<p>[reduce(:<em>method-name</em>)</p>

<pre>Reduces using the given binary operator or method name as the
reduction function. If it is a method, the method must take a
single argument for the right-hand-side of the operation. The
first element in the table is used as the initial accumulator.</pre>

<p>[reduce(<em>initial</em>, :<em>method-name</em>)</p>

<pre>Reduces using the given binary operator or method name as the
reduction function. If it is a method, the method must take a
single argument for the right-hand-side of the operation. The
given initial accumulator value is used.</pre>
          

          
          <div class="method-source-code" id="reduce-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 426</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reduce</span>(*<span class="ruby-identifier">args_</span>)
  <span class="ruby-identifier">nothing_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">nothing_</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Wrong number of arguments&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e_</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">nothing_</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">obj_</span>
        <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">e_</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">obj_</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">obj_</span>, <span class="ruby-identifier">e_</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">sym_</span> = <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">pop</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">nothing_</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Wrong number of arguments&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e_</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">nothing_</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">obj_</span>
        <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">e_</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">sym_</span>, <span class="ruby-identifier">e_</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">nothing_</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">obj_</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">obj_</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- reduce-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-inject">inject</a>
        </div>
        

        
      </div><!-- reduce-method -->

    
      <div id="method-i-reduce_with_position" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reduce_with_position</span><span
            class="method-args">(*args_) { |obj_, val_, pos_| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Performs a reduce on the entire table and returns the result. You may use
one of the following call sequences:</p>
<dl class="rdoc-list label-list"><dt><a href="Table.html#method-i-reduce_with_position">#reduce_with_position</a>{ |accumulator, value, position| <em>block</em> }
<dd>
<p>Reduces using the given block as the reduction function. The first element
in the table is used as the initial accumulator.</p>
</dd><dt><a href="Table.html#method-i-reduce_with_position">#reduce_with_position</a>(initial){ |accumulator, value, position| <em>block</em> }
<dd>
<p>Reduces using the given block as the reduction function, with the given
initial value for the accumulator.</p>
</dd></dl>
          

          
          <div class="method-source-code" id="reduce_with_position-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 477</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reduce_with_position</span>(*<span class="ruby-identifier">args_</span>)
  <span class="ruby-identifier">nothing_</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">nothing_</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Wrong number of arguments&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">each_with_position</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">val_</span>, <span class="ruby-identifier">pos_</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">nothing_</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">obj_</span>
      <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">val_</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">obj_</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">obj_</span>, <span class="ruby-identifier">val_</span>, <span class="ruby-identifier">pos_</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">nothing_</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">obj_</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">obj_</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- reduce_with_position-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-inject_with_position">inject_with_position</a>
        </div>
        

        
      </div><!-- reduce_with_position-method -->

    
      <div id="method-i-set-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set!</span><span
            class="method-args">(*args_, &block_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Set the value in the cell at the given coordinates. If a block is given, it
is passed the current value and expects the new value to be its result. If
no block is given, the last argument is taken to be the new value. The
remaining arguments identify the cell, using the same syntax as for <a
href="Table.html#method-i-get">#get</a>.</p>

<p>You cannot set a value in a table with a parent. Instead, you must modify
the parent, and those changes will be reflected in the child.</p>

<p>Raises <a href="NoSuchCellError.html">NoSuchCellError</a> if the
coordinates do not exist.</p>

<p>Returns self so calls can be chained.</p>
          

          
          <div class="method-source-code" id="set-21-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 254</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set!</span>(*<span class="ruby-identifier">args_</span>, &amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TableLockedError</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
  <span class="ruby-identifier">value_</span> = <span class="ruby-identifier">block_</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">args_</span>.<span class="ruby-identifier">pop</span>
  <span class="ruby-identifier">offset_</span> = <span class="ruby-identifier">_offset_for_args</span>(<span class="ruby-identifier">args_</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">offset_</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoSuchCellError</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_</span>
    <span class="ruby-identifier">value_</span> = <span class="ruby-identifier">block_</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">offset_</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">offset_</span>] = <span class="ruby-identifier">value_</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- set-21-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-5B-5D-3D">[]=</a>
        </div>
        

        
      </div><!-- set-21-method -->

    
      <div id="method-i-shared_slice" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">shared_slice</span><span
            class="method-args">(hash_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns a table containing a “slice” of this table. The given hash should
be keyed by axis indexes or axis names, and should provide specific values
for zero or more dimensions, which provides the constraints for the slice.</p>

<p>Returns a slice table whose parent is this table. Because the slice table
has a parent, it is not mutable because it shares data with this table. If
this table has values modified, the slice data will reflect those changes.</p>
          

          
          <div class="method-source-code" id="shared_slice-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 556</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">shared_slice</span>(<span class="ruby-identifier">hash_</span>)
  <span class="ruby-identifier">offset_</span> = <span class="ruby-ivar">@offset</span>
  <span class="ruby-identifier">select_set_</span> = {}
  <span class="ruby-identifier">hash_</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k_</span>, <span class="ruby-identifier">v_</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">ainfo_</span> = <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">axis</span>(<span class="ruby-identifier">k_</span>))
      <span class="ruby-identifier">aindex_</span> = <span class="ruby-identifier">ainfo_</span>.<span class="ruby-identifier">axis_index</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">select_set_</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">aindex_</span>)
        <span class="ruby-identifier">lindex_</span> = <span class="ruby-identifier">ainfo_</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">v_</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">lindex_</span>
          <span class="ruby-identifier">offset_</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">ainfo_</span>.<span class="ruby-identifier">step</span> * <span class="ruby-identifier">lindex_</span>
          <span class="ruby-identifier">select_set_</span>[<span class="ruby-identifier">aindex_</span>] = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">substructure_omitting</span>(<span class="ruby-identifier">select_set_</span>.<span class="ruby-identifier">keys</span>),
    <span class="ruby-value">:acquire</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@vals</span>, <span class="ruby-value">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset_</span>, <span class="ruby-value">:parent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- shared_slice-source -->
          
        </div>

        

        
      </div><!-- shared_slice-method -->

    
      <div id="method-i-size" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">size</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>The number of cells in this table.</p>
          

          
          <div class="method-source-code" id="size-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">size</span>
  <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- size-source -->
          
        </div>

        

        
      </div><!-- size-method -->

    
      <div id="method-i-slice" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">slice</span><span
            class="method-args">(hash_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns a table containing a “slice” of this table. The given hash should
be keyed by axis indexes or axis names, and should provide specific values
for zero or more dimensions, which provides the constraints for the slice.</p>

<p>Returns a new table independent of this table. The new table can have cell
values modified independently of this table.</p>
          

          
          <div class="method-source-code" id="slice-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 584</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">slice</span>(<span class="ruby-identifier">hash_</span>)
  <span class="ruby-identifier">shared_slice</span>(<span class="ruby-identifier">hash_</span>).<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- slice-source -->
          
        </div>

        

        
      </div><!-- slice-method -->

    
      <div id="method-i-to_json" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_json</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns a JSON serialization of this table, as an unparsed string.</p>
          

          
          <div class="method-source-code" id="to_json-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 599</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_json</span>
  <span class="ruby-identifier">to_json_object</span>.<span class="ruby-identifier">to_json</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_json-source -->
          
        </div>

        

        
      </div><!-- to_json-method -->

    
      <div id="method-i-to_json_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_json_object</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns a JSON serialization of this table, as an object. If you need to
output a JSON string, you must unparse separately.</p>
          

          
          <div class="method-source-code" id="to_json_object-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 592</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_json_object</span>
  {<span class="ruby-string">'type'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'ntable'</span>, <span class="ruby-string">'axes'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">to_json_array</span>, <span class="ruby-string">'values'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@parent</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">_compacted_vals</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@vals</span>}
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_json_object-source -->
          
        </div>

        

        
      </div><!-- to_json_object-method -->

    
      <div id="method-i-to_nested_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_nested_object</span><span
            class="method-args">(opts_={})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns a nested-object (nested arrays and hashes) serialization of this
table.</p>
          

          
          <div class="method-source-code" id="to_nested_object-source">
            <pre><span class="ruby-comment"># File lib/ntable/table.rb, line 607</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_nested_object</span>(<span class="ruby-identifier">opts_</span>={})
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">degenerate?</span>
    <span class="ruby-ivar">@vals</span>[<span class="ruby-ivar">@offset</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">_to_nested_obj</span>(<span class="ruby-value">0</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@structure</span>.<span class="ruby-identifier">dim</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">opts_</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_nested_object-source -->
          
        </div>

        

        
      </div><!-- to_nested_object-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

